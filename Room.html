<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CaBelle</title>
    <style>
        body{text-align: center;}
        #enterRoomDetails {float: left; width: 50%; background-color: darkslategrey; color: floralwhite;}
        #findDetails {float: left; width: 50%; background-color: floralwhite; color: darkslategray;}
        input {width: 120px;}
    </style>
</head>
<body>
    <!-- Navigating through web pages -->
    <nav>
        <a href="./index.html">Home</a>
        <a href="./Room.html">Rooms</a>
    </nav>

    <!-- Room Info-->
    <div id="enterRoomDetails">
        <h1>Room Selection</h1>

        <h4>When</h4>
        <input id="enterBookingDates" type="text", type="number">

        <h4>Rooms & Guests</h4>
        <input id="enterGuestNumber" type="number">

        <h4>Price Range</h4>
        <input id="enterPriceRange" type="number"> <br><br><br><br>
        
        <!-- Buttons that will be displayed -->
        <button id="insert">INSERT</button>
        <button id="update">UPDATE</button>
        <button id="remove">REMOVE</button>
        <button id="findroom">FIND ROOM</button> <br><br>
    </div>



    <!-- Finding Room Info in Database -->
    <div id="findDetails">
        <h1>Find Room</h1>
        <h4>Room</h4>
        <input id="findRoom" type="text"> <br><br>
        <button id="find">FIND</button>     <br><br><br><br>

        <h3 id="findBookingDates" type="text"></h3>
        <h3 id="findGuestNumber" type="text"></h3> 
        <h3 id="findPriceRange" type="text"></h3> <br><br>
    </div>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js";
        
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD2w9wR2W7hHjm1vojOmMO7cX-_93QtZWI",
            authDomain: "cabelle-a0a69.firebaseapp.com",
            databaseURL: "https://cabelle-a0a69-default-rtdb.firebaseio.com",
            projectId: "cabelle-a0a69",
            storageBucket: "cabelle-a0a69.appspot.com",
            messagingSenderId: "735995960774",
            appId: "1:735995960774:web:f0fa81b21871c044b7a6c7",
            measurementId: "G-MF101YKX7H"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        import {getDatabase, set, get, update, remove, ref, child}
        from "https://www.gstatic.com/firebasejs/10.10.0/firebase-database.js"

        
        
        const dataBase = getDatabase();

        // Entering User Info
        var enterBookingDates = document.querySelector("#enterBookingDates");
        var enterGuestNumber = document.querySelector("#enterGuestNumber");
        var enterPriceRange = document.querySelector("#enterPriceRange");
        

        // Finding User Info
        var findBookingDates = document.querySelector("#findBookingDates");
        var findGuestNumber = document.querySelector("#findGuestNumber");
        var findPriceRange = document.querySelector("#findPriceRange");
        
       // Buttons
       var insertButton = document.querySelector("#insert");
       var updateButton = document.querySelector("#update");
       var removeButton = document.querySelector("#remove");
       var findButton = document.querySelector("#find");

        // Inserting Room Data
        function InsertData() {
            set(ref(dataBase, "Room/" + enterRoom.value), {
                BookingDates: enterBookingDates.value,
                GuestNumber: enterGuestNumber.value,
                PriceRange: enterPriceRange.value
            })
            .then(()=>{
                alert("Room Selection added successfully!");
            })
            .catch((error)=>{
                alert(error);
            });
        }

        // Updating User Data
        function UpdateData() {
            update(ref(dataBase, "Room/" + enterRoom.value), {
                BookingDates: enterBookingDates.value,
                GuestNumber: enterGuestNumber.value,
                PriceRange: enterPriceRange.value
            })
            .then(()=>{
                alert("Room Selection updated successfully!");
            })
            .catch((error)=>{
                alert(error);
            }); 
        }

        // Removing User Data
        function RemoveData() {
            remove(ref(dataBase, "Room/" + enterRoom.value))
            .then(()=>{
                alert("Room Selection deleted successfully!");
            })
            .catch((error)=>{
                alert(error);
            });
        }

        // Finding User Data
        function FindData() {
            const dataBaseref = ref(dataBase);

            get(child(dataBaseref, "Room/" + findRoom.value))
            .then((snapshot)=>{
                if (snapshot.exists()) {
                    findBookingDates.innerHTML = "Booking Dates: " + snapshot.val().BookingDates;
                    findGuestNumber.innerHTML = "Guest Number: " + snapshot.val().GuestNumber;
                    findPriceRange.innerHTML = "Price Range: " + snapshot.val().PriceRange;
                } else {
                    alert("No data found");
                }
            })
            .catch((error)=>{
                alert(error);
            });
        }

        // Button Actions
        insertButton.addEventListener('click', InsertData);
        updateButton.addEventListener('click', UpdateData);
        removeButton.addEventListener('click', RemoveData);
        findButton.addEventListener('click', FindData);

      </script>

</body>
</html>